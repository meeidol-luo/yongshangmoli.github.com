<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<meta name="format-detection" content="telephone=no">
		<title>咨询详情</title>
		<link href="css/suffer-style.css?d=20160721" rel="stylesheet" type="text/css" />
		<script src="js/font-adjust.js" type="text/javascript" charset="utf-8"></script>
		<style>
			.enlargeWrp {height: 100%;width: 100%; overflow: hidden; position: absolute;top:0;left:0;background-color: rgba(0,0,0,0.2);}
			/* .enlargeWrp .inner {height: 100%;} 
			.enlargeWrp ul,li {height: 100%;width: 100%;}  */
			.enlargeWrp .inner {height: 100%;float: left;z-index: 1;text-align: center;}
			.scroller {height: 100%;z-index: 1;line-height: 640px;}
			/*.enlargeWrp img {height: 100%;object-fit:contain;float:left;}*/
			.enlargeWrp img {max-width: 100%;vertical-align: middle;}
			.toggleZoomHalf {-webkit-transform: scale(0.5);transform: scale(0.5);}
			.toggleZoom1 {-webkit-transform: scale(1);transform: scale(1);}
			.toggleZoom2 {-webkit-transform: scale(2);transform: scale(2);}
		</style>
	</head>
	<body>
		<div class="page" id="page">
			<!--ask process -->
			<section class="ask-process">
				<span class="icon"></span>
				<h3 id="ask_state"></h3>
				<!-- <p class="inline">等待医生的回复</p> -->
			</section>
			<!--ask detail-->
			<section class="ask-detail">
				<form action="" accept-charset="utf-8">
					<ul>
						<li class="team-clear">
							<p>患者姓名</p>
							<p>大婴孩</p>
						</li>
						<li class="team-clear">
							<p>年龄</p>
							<p>31</p>
						</li>
						<li class="team-clear">
							<p>手机号码</p>
							<p>1356584865</p>
						</li>
						<li class="team-clear">
							<p>性别</p>
							<p>女</p>
						</li>
					</ul>
					<div class="hr"></div>
					<ul class="ill-describe">
						<li class="team-clear">
							<p>药物过敏</p>
							<p>肠胃这几天不舒服，前两天带孩子去吃了海鲜，吃了正露丸肠胃这几天不舒服，前两天带孩子
							</p>

						</li>
						<li class="team-clear">
							<p>病情描述</p>
							<p id="disease-photo">
								肠胃这几天不舒服，前两天带孩子去吃了海鲜，吃了正露丸肠胃这几天不舒服，前两天带孩子露丸肠胃这几天不舒服，前两天带孩子 .<br/><br/>
							</p>
						</li>
					</ul>
				</form>
			</section>
		</div>
		<!-- 弹出层 --> <!-- style="width:200%;-webkit-transform: translate(0, 0);"   style="-webkit-transform: translate(-375px, 0);"  style="display: none;"-->
		<div id="big_img" class="enlargeWrp">
			<div class="inner">
				<div class="scroller">
					<img src="images/doctor-banner.jpg"></img>
				</div>
			</div>
			<div class="inner">
				<div class="scroller">
					<img src="images/doctor-banner2.jpg"></img>
				</div>
			</div>
		</div>

		<script src="js/zepto.js"></script>
		<script src="js/common.js"></script>
		<script>
			var util = {
				screenHgt : document.body.clientHeight,
				screenWid : document.body.clientWidth,
				states : ["咨询中","咨询已结束","已退款","正在退款"],
				photoWrp : $("#disease-photo"),
				bigImgCtnr : $("#big_img"),
				imgCount : 2,
				imgStore : [],
				setState : function(state) {
					$("#ask_state").text(state);
				},
				//在病情描述中添加照片
				creatImg : function(imgArray) {
					for (var i = 0,len=imgArray.length; i < len; i++) {
						var img = document.createElement("img");
						img.setAttribute('data-id', 'img_'+i);
						img.alt = "疾病照片";
						img.src = imgArray[i];
						util.photoWrp.append($(img));
						var imgCopy = img.cloneNode(true);
						util.imgStore.push(imgCopy);
					}
				},
				initWrp : function() {
					util.bigImgCtnr[0].style.width = (util.imgCount)*(util.screenWid)+"px";
					for (var i = 0,len = util.imgCount; i <len; i++) {
						(function(i) {
							// console.log(util.imgStore[i].width,util.imgStore[i].height,util.screenWid);
							var imgW = util.imgStore[i].width,imgH = util.imgStore[i].height;
							util.bigImgCtnr.append($(util.imgStore[i]));
							util.imgStore[i].style.width = util.screenWid+"px";
						})(i);
					}
					$(".scroller").css({"line-height":util.screenHgt});
				}
			};
			//初始化设置
			util.setState(util.states[1]);
			util.creatImg(["images/artcl-icon.png","images/doctor-banner.jpg"]);
		/*	util.initWrp();
*/
			//点击病情描述中的照片
			$("#disease-photo").find("img").on({
				click : function(e) {
					var imgIndex = e.target.getAttribute("data-id").split("_")[1];
					var offset = -imgIndex*util.screenWid+"px";
					util.bigImgCtnr.css({"-webkit-transform":"translate("+offset+",0)","transform":"translate("+offset+",0)"}).parent().show();
					// console.log(offset);
				},
			});
			var DELAY = 300, clicks = 0, timer = null;
			util.bigImgCtnr.find("img").on({
				click : function(e) {
					clicks ++;
					if(clicks === 1) {
						timer = setTimeout(function() {
							console.log("in click");
							util.bigImgCtnr.parent().hide();
						},DELAY);
					}
					else {
						clearTimeout(timer); 
						console.log("in dblclick");
						// $(this).css({"-webkit-transform":"scale(2)","transform":"scale(2)"});
						$(this).parent().toggleClass("toggleZoom2","toggleZoom1");
						clicks = 0; 
					}
					// var imgIndex = e.target.getAttribute("data-id").split("_")[1];
					// var offset = -imgIndex*util.screenWid+"px";
					// util.bigImgCtnr.css({"-webkit-transform":"translate("+offset+",0)","transform":"translate("+offset+",0)"}).parent().show();
					// console.log(offset);
				},
				/*dblclick : function() {
					console.log("in dblclick");
					util.bigImgCtnr.toggleClass(toggleZoom2,toggleZoom1);
				},*/
			});
		</script>
	</body>
</html>
